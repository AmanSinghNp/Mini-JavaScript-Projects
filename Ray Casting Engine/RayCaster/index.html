<!DOCTYPE html>
<html class="dark" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>RayCaster.js - Retro 3D Engine</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;family=Noto+Sans:wght@400;500;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#13ec13",
              "background-light": "#f6f8f6",
              "background-dark": "#102210",
              "ui-dark": "#0a140a",
              "ui-border": "#1a2e1a",
            },
            fontFamily: {
              display: ["Space Grotesk", "sans-serif"],
              body: ["Noto Sans", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.25rem",
              lg: "0.5rem",
              xl: "0.75rem",
              full: "9999px",
            },
            boxShadow: {
              glow: "0 0 10px rgba(19, 236, 19, 0.3), 0 0 20px rgba(19, 236, 19, 0.1)",
              crt: "inset 0 0 20px rgba(0,0,0,0.5)",
            },
          },
        },
      };
    </script>
    <style>
      body {
        font-family: "Space Grotesk", "Noto Sans", sans-serif;
        overflow: hidden; /* Prevent scrolling for immersive feel */
      }
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #102210;
      }
      ::-webkit-scrollbar-thumb {
        background: #1a2e1a;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #13ec13;
      }

      .scanlines {
        background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0),
          rgba(255, 255, 255, 0) 50%,
          rgba(0, 0, 0, 0.2) 50%,
          rgba(0, 0, 0, 0.2)
        );
        background-size: 100% 4px;
        pointer-events: none;
      }
    </style>
  </head>
  <body
    class="bg-background-light dark:bg-background-dark text-white h-screen flex flex-col"
  >
    <!-- Top Navigation Bar -->
    <header
      class="flex-none flex items-center justify-between whitespace-nowrap border-b border-ui-border bg-ui-dark px-6 py-3 z-20"
    >
      <div class="flex items-center gap-4 text-primary">
        <div class="size-6 flex items-center justify-center">
          <span class="material-symbols-outlined text-2xl"
            >videogame_asset</span
          >
        </div>
        <h1
          class="text-primary text-xl font-bold tracking-widest uppercase font-display drop-shadow-[0_0_5px_rgba(19,236,19,0.5)]"
        >
          RayCaster.js
        </h1>
      </div>
      <div class="flex items-center gap-6">
        <div class="hidden md:flex items-center gap-2 text-sm text-[#9db99d]">
          <span class="material-symbols-outlined text-base">help</span>
          <span>Controls: WASD to Move, Arrows to Look</span>
        </div>
        <button
          class="flex items-center justify-center text-primary hover:text-white transition-colors"
        >
          <span class="material-symbols-outlined">settings</span>
        </button>
      </div>
    </header>
    <!-- Main Game Area -->
    <main
      class="flex-1 relative flex items-center justify-center p-4 lg:p-8 overflow-hidden bg-[url('https://placeholder.pics/svg/300')] bg-cover bg-center"
      data-alt="Dark abstract grid background pattern"
    >
      <!-- Background Vignette/Dimmer -->
      <div
        class="absolute inset-0 bg-background-dark/90 backdrop-blur-sm z-0"
      ></div>
      <!-- Game Container -->
      <div
        class="relative w-full max-w-6xl aspect-video bg-black rounded-lg border-2 border-ui-border shadow-glow overflow-hidden z-10 flex flex-col"
      >
        <!-- The "Canvas" -->
        <div
          class="relative flex-1 w-full h-full bg-[#050505] overflow-hidden group"
        >
          <canvas id="screen" class="w-full h-full block"></canvas>

          <!-- CRT Scanline Effect Overlay -->
          <div
            class="absolute inset-0 scanlines opacity-30 pointer-events-none"
          ></div>
          <div
            class="absolute inset-0 shadow-crt pointer-events-none rounded-lg"
          ></div>

          <!-- Crosshair -->
          <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none text-primary/80"
          >
            <span class="material-symbols-outlined text-3xl font-light"
              >add</span
            >
          </div>

          <!-- Top Left: Mini Map -->
          <div
            class="absolute top-4 left-4 w-32 h-32 bg-black/80 border border-primary/30 rounded p-1 backdrop-blur-sm shadow-lg"
          >
            <canvas
              id="minimap"
              class="w-full h-full bg-ui-dark rounded relative overflow-hidden"
            ></canvas>
          </div>

          <!-- Top Right: FPS Counter -->
          <div
            class="absolute top-4 right-4 bg-black/60 border border-ui-border px-3 py-1 rounded text-[#9db99d] font-mono text-xs backdrop-blur-sm"
          >
            FPS: <span id="fps-counter" class="text-primary font-bold">60</span>
          </div>

          <!-- Messages/Log Area -->
          <div
            class="absolute top-20 left-1/2 -translate-x-1/2 text-center"
            id="message-area"
            style="display: none"
          >
            <div
              class="bg-primary/10 border border-primary/30 text-primary px-4 py-1 rounded-full text-sm font-display uppercase tracking-widest animate-pulse"
            >
              Sector Clear
            </div>
          </div>
        </div>

        <!-- HUD / Status Bar -->
        <div
          class="h-20 bg-ui-dark border-t border-ui-border flex items-center px-6 gap-8 shrink-0"
        >
          <!-- Health Section -->
          <div class="flex flex-col gap-1 w-1/3 max-w-[240px]">
            <div class="flex justify-between items-end">
              <span
                class="text-primary font-bold font-display tracking-widest text-sm"
                >HEALTH</span
              >
              <span class="text-white font-mono text-lg font-bold">100%</span>
            </div>
            <!-- Progress Bar Component -->
            <div
              class="h-4 w-full bg-[#1a2e1a] rounded overflow-hidden relative border border-[#2a4e2a]"
            >
              <div
                class="absolute inset-0 bg-[linear-gradient(90deg,transparent_90%,#000_100%)] bg-[length:10px_100%] opacity-30 z-10"
              ></div>
              <div
                class="h-full bg-primary shadow-[0_0_10px_rgba(19,236,19,0.6)] relative"
                style="width: 100%"
              >
                <div
                  class="absolute inset-0 bg-white/20 animate-[pulse_2s_infinite]"
                ></div>
              </div>
            </div>
          </div>
          <!-- Weapon Info Center -->
          <div
            class="flex-1 flex flex-col items-center justify-center border-x border-ui-border/30 h-12"
          >
            <span
              class="text-[#5c7a5c] text-xs font-display tracking-widest uppercase mb-1"
              >Current Weapon</span
            >
            <div
              class="flex items-center gap-2 text-white font-display font-bold text-xl tracking-wider uppercase"
            >
              <span class="material-symbols-outlined text-primary">token</span>
              PISTOL
            </div>
          </div>
          <!-- Ammo Section -->
          <div class="flex flex-col gap-1 w-1/3 max-w-[240px] items-end">
            <div class="flex justify-between items-end w-full">
              <span class="text-[#9db99d] font-mono text-lg"
                ><span id="val-ammo">50</span
                ><span class="text-[#4a6b4a] text-sm"
                  >/<span id="val-max-ammo">50</span></span
                ></span
              >
              <span
                class="text-primary font-bold font-display tracking-widest text-sm"
                >AMMO</span
              >
            </div>
            <!-- Discrete ammo blocks -->
            <div id="ammo-bar" class="flex gap-1 justify-end w-full">
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
              <div
                class="ammo-block h-4 w-2 bg-primary shadow-[0_0_5px_rgba(19,236,19,0.8)] rounded-sm"
              ></div>
            </div>
          </div>
        </div>
      </div>
      <!-- Mobile Controls -->
      <div
        class="absolute bottom-8 left-0 right-0 px-8 flex justify-between md:hidden z-50 select-none"
      >
        <!-- D-Pad -->
        <div
          id="dpad"
          class="size-32 bg-white/10 rounded-full border border-white/20 backdrop-blur-sm active:bg-white/20 transition-colors touch-none relative"
        >
          <div
            class="absolute top-2 left-1/2 -translate-x-1/2 text-white/50 text-xs"
          >
            W
          </div>
          <div
            class="absolute bottom-2 left-1/2 -translate-x-1/2 text-white/50 text-xs"
          >
            S
          </div>
          <div
            class="absolute left-2 top-1/2 -translate-y-1/2 text-white/50 text-xs"
          >
            A
          </div>
          <div
            class="absolute right-2 top-1/2 -translate-y-1/2 text-white/50 text-xs"
          >
            D
          </div>
        </div>
        <!-- Action Button -->
        <div
          id="btn-shoot"
          class="size-32 bg-white/10 rounded-full border border-white/20 backdrop-blur-sm active:bg-primary/20 transition-colors touch-none flex items-center justify-center"
        >
          <span class="material-symbols-outlined text-4xl text-white/70"
            >my_location</span
          >
        </div>
      </div>
    </main>
    <!-- Footer / Debug Info -->
    <footer
      class="flex-none bg-ui-dark text-[#4a6b4a] text-xs py-2 px-6 border-t border-ui-border flex justify-between font-mono"
    >
      <div>RayCaster Engine v1.0.4</div>
      <div class="flex gap-4">
        <span>X: <span id="debug-x">0.00</span></span>
        <span>Y: <span id="debug-y">0.00</span></span>
        <span>DIR: <span id="debug-dir">0.00</span></span>
      </div>
    </footer>
    <script type="module" src="main.js"></script>
  </body>
</html>
