<!DOCTYPE html>
<html class="dark" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>RayCaster.js - Retro 3D Engine</title>
    
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Noto+Sans:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />
    
    <!-- Vanilla CSS Stylesheets -->
    <link rel="stylesheet" href="styles/variables.css" />
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/layout.css" />
    <link rel="stylesheet" href="styles/crt-overlay.css" />
    <link rel="stylesheet" href="styles/phosphor-glow.css" />
    <link rel="stylesheet" href="styles/hud-panels.css" />
    <link rel="stylesheet" href="styles/animations.css" />
    <link rel="stylesheet" href="styles/crosshair.css" />
    <link rel="stylesheet" href="styles/layer-ordering.css" />
  </head>
  <body>
    <!-- Main Game Area -->
    <main class="main-content">
      <!-- Background Vignette/Dimmer -->
      <div class="background-dimmer"></div>

      <!-- Game Container -->
      <div class="game-container">
        <!-- The Canvas -->
        <div id="game-viewport">
          <canvas id="screen"></canvas>

          <!-- Weapon Canvas Layer -->
          <canvas id="weapon-canvas"></canvas>

          <!-- Effects Canvas Layer (created by EffectsCanvas class) -->

          <!-- CRT Overlay Layer -->
          <div class="crt-overlay">
            <div class="crt-scanlines"></div>
            <div class="crt-chromatic-aberration"></div>
            <div class="crt-vignette"></div>
            <div class="crt-barrel-distortion"></div>
          </div>

          <!-- Enhanced Crosshair System -->
          <div id="crosshair-container">
            <div id="crosshair" class="crosshair-default">
              <div class="crosshair-dot"></div>
              <div class="crosshair-line top"></div>
              <div class="crosshair-line bottom"></div>
              <div class="crosshair-line left"></div>
              <div class="crosshair-line right"></div>
              <div class="hit-marker" id="hit-marker"></div>
              <div class="kill-indicator" id="kill-indicator">+100</div>
            </div>
            <div id="low-ammo-warning" class="hidden">LOW AMMO</div>
          </div>

          <!-- Top Left: Mini Map -->
          <div class="minimap-border">
            <canvas id="minimap"></canvas>
          </div>

          <!-- Top Right: FPS Counter -->
          <div class="fps-counter">
            FPS: <span id="fps-counter" class="value hud-text">60</span>
          </div>

          <!-- Messages/Log Area -->
          <div id="message-area" style="display: none">
            <div class="message-badge">Sector Clear</div>
          </div>
        </div>

        <!-- Tactical HUD System -->
        <div id="hud-container">
          <!-- Left Panel - Vitals -->
          <div class="hud-panel left-panel" id="vitals-panel">
            <div class="panel-header">VITALS</div>
            <div class="status-icon" id="player-face">
              <canvas id="player-face-canvas" width="64" height="64"></canvas>
            </div>
            <div class="bar-container health-bar">
              <div class="bar-label">HEALTH</div>
              <div class="bar-fill" id="health-bar-fill" style="width: 100%"></div>
            </div>
            <div class="numeric-display" id="health-numeric">100</div>
            
            <div class="bar-container armor-bar">
              <div class="bar-label">ARMOR</div>
              <div class="bar-fill" id="armor-bar-fill" style="width: 100%"></div>
            </div>
            <div class="numeric-display" id="armor-numeric">100</div>
          </div>

          <!-- Right Panel - Weapon -->
          <div class="hud-panel right-panel" id="weapon-panel">
            <div class="panel-header">ARMAMENT</div>
            <div class="weapon-icon" id="current-weapon">P</div>
            <div class="ammo-display">
              <span id="ammo-current">50</span> / <span id="ammo-reserve">200</span>
            </div>
            <div class="ammo-grid" id="ammo-visual"></div>
            <div id="reload-indicator" class="hidden">RELOADING...</div>
          </div>
        </div>

        <!-- Legacy HUD / Status Bar (Hidden by default) -->
        <div id="legacy-hud" class="legacy-hud" style="display: none;">
          <!-- Health Section -->
          <div class="legacy-section">
            <div class="legacy-header">
              <span class="hud-text hud-text-pulse text-primary font-bold tracking-widest text-sm">HEALTH</span>
              <span class="hud-text hud-text-pulse font-mono text-lg font-bold">100%</span>
            </div>
            <div class="legacy-bar health-bar">
              <div class="bar-segments"></div>
              <div class="legacy-bar-fill"></div>
            </div>
          </div>

          <!-- Weapon Info Center -->
          <div class="legacy-weapon">
            <span class="text-dim text-xs tracking-widest uppercase">Current Weapon</span>
            <div class="weapon-name">
              <span class="material-symbols-outlined text-primary">token</span>
              <span class="hud-text">PISTOL</span>
            </div>
          </div>

          <!-- Ammo Section -->
          <div class="legacy-section ammo-section">
            <div class="legacy-header">
              <span class="ammo-counter text-muted font-mono text-lg">
                <span id="val-ammo" class="hud-text">50</span>
                <span class="text-dim text-sm">/<span id="val-max-ammo">50</span></span>
              </span>
              <span class="hud-text hud-text-pulse text-primary font-bold tracking-widest text-sm">AMMO</span>
            </div>
            <div id="ammo-bar" class="ammo-blocks">
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
              <div class="ammo-block active"></div>
            </div>
          </div>
        </div>

        <!-- Level Cleared Popup -->
        <div id="level-popup" class="level-popup hidden">
          <div class="level-popup-content">
            <div class="level-badge">LEVEL <span id="level-number">1</span></div>
            <h2 class="level-title">SECTOR CLEARED</h2>
            <p class="level-message">All hostiles eliminated</p>
            <button id="next-level-btn" class="level-button">NEXT SECTOR</button>
          </div>
        </div>
    </main>

    <script type="module" src="main.js"></script>
  </body>
</html>
